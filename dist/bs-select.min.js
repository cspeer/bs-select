/*!
* @erwinstone/bs-select v1.0.2 (https://bs-select.vercel.app/)
* Copyright 2022 erwinstone
* Licensed under MIT (https://github.com/erwinstone/bs-select/blob/master/LICENSE)
*/(function(a,l){typeof exports=="object"&&typeof module!="undefined"?module.exports=l():typeof define=="function"&&define.amd?define(l):(a=typeof globalThis!="undefined"?globalThis:a||self,a.Bss=l())})(this,function(){"use strict";class a{#m="bss-wrapper";#n="dropdown-item";#f="bss-items";#b="bss-clear";#L="dropdown-header";#e="d-none";#g="bss-no-results";#w="bss-tag-remove";#t;#o;#E;#y;#$;#i;#x;#l;#s;#a;#d;#r;#h;#c;constructor(e,t){this.#t=e,this.#o=t?.search??e.dataset.bssSearch!==void 0,this.#E=t?.create??e.dataset.bssCreate!==void 0,this.#y=t?.clear??e.dataset.bssClear!==void 0,this.#$=t?.maxHeight||e.dataset.bssMaxHeight||"25rem",this.#i={search:"Search",noResults:"No results found",clear:"Clear selection",addElement:'Press Enter to add "<b>%{value}</b>"'},this.#i=t?.labels?{...this.#i,...t.labels}:this.#i,this.#x=(this.#t.dataset.bssAutoClose||t?.autoClose)??!0,this.#M(),this.#S(),this.#T()}#M(){this.#t.nextElementSibling&&this.#t.nextElementSibling.classList&&this.#t.nextElementSibling.classList.contains(this.#m)&&this.#t.nextElementSibling.remove();const e=`
		<div class="dropdown ${this.#m}">
			<button type="button" data-bs-toggle="dropdown" data-bs-auto-close="${this.#x}" aria-expanded="false"></button>
			<div class="dropdown-menu" style="max-height:${this.#$}">
				<div class="d-flex flex-column">
					<div class="bss-search-wrapper">
						<input type="text" class="form-control" placeholder="${this.#t.dataset.bssSearchLabel||this.#i.search}" onkeydown="return event.key !== 'Enter'">
					</div>
					<div class="${this.#f}"></div>
					<div class="${this.#g} ${this.#n} text-wrap ${this.#e}">${this.#t.dataset.bssNoResultsLabel||this.#i.noResults}</div>
				</div>
			</div>
			<button class="btn ${this.#b}" tabindex="-1" type="button" title="${this.#t.dataset.bssClearLabel||this.#i.clear}">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
					<path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
					<path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
				</svg>
			</button>
		</div>
		`;this.#t.insertAdjacentHTML("afterend",e),this.#t.style.display="none";const t=this.#t.nextElementSibling;t instanceof HTMLDivElement&&(this.#l=t),this.#s=t.querySelector('[data-bs-toggle="dropdown"]'),this.#a=t.querySelector("input"),this.#d=t.querySelector(`.${this.#b}`),this.#h=this.#t.multiple,this.#c=this.#t.disabled,this.#r=t.querySelector(`.${this.#g}`),this.#s.className=this.#t.className,this.#s.disabled=this.#c,this.#t.classList.contains("form-select-sm")&&this.#a.classList.add("form-control-sm"),this.#t.classList.contains("form-select-lg")&&this.#a.classList.add("form-control-lg"),this.#y||this.#d.remove(),this.#o||(this.#a.parentElement.remove(),this.#r.remove())}#S(){this.#s.innerHTML=this.#C();const e=this.#l.querySelector(`.${this.#f}`);e.innerHTML="",this.#A().forEach(t=>e.appendChild(t)),this.#t.value!==""&&this.#p()?this.#s.setAttribute("data-show-clear","true"):this.#s.removeAttribute("data-show-clear"),this.#c||this.#l.querySelectorAll(`.${this.#w}`).forEach(t=>{t.addEventListener("click",()=>{this.#s.click(),this.removeValue(t.getAttribute("data-bs-value"))})}),this.#a.value="",this.#o&&this.#r.classList.add(this.#e)}#T(){this.#s.addEventListener("shown.bs.dropdown",()=>{if(this.#o)this.#a.focus();else{const e=this.#l.querySelector(`.${this.#n}.active`);e&&e instanceof HTMLButtonElement&&e.focus()}}),this.#a.addEventListener("keyup",e=>{const t=this.#a.value.trim(),s=this.#l.querySelectorAll(`button.${this.#n}`);let r=0;if(s.forEach(i=>{i.classList.add(this.#e),i.innerHTML.toLowerCase().indexOf(t.toLowerCase())>-1&&(i.classList.remove(this.#e),r++)}),this.#l.querySelectorAll(`.${this.#L}`).forEach(i=>{i.querySelectorAll(`button:not(.${this.#e})`).length?i.classList.remove(this.#e):i.classList.add(this.#e)}),r)this.#r.classList.add(this.#e);else if(this.#r.classList.remove(this.#e),this.#E&&(this.#r.innerHTML=(this.#t.dataset.bssAddElement||this.#i.addElement).replace("%{value}",t),e.key==="Enter")){let i=document.createElement("option");i.value=t,i.selected=!0,i.textContent=t,this.#t.add(i),this.#s.click(),this.#v()}}),this.#d.addEventListener("click",()=>this.clear()),this.#t.addEventListener("change",()=>this.#S())}clear(){Array.from(this.#t.options).forEach(e=>e.selected=!1),this.#p()&&(this.#t.value="")}setValue(e){this.#u(e,!0),e!==""&&this.#u("",!1),this.#v()}removeValue(e){this.#u(e,!1),this.#v()}getValue(){return this.#h?Array.from(this.#t.selectedOptions).map(e=>e.value):this.#t.value}#u(e,t){Array.from(this.#t.options).forEach(s=>s.value===e&&(s.selected=t))}#v(){this.#t.dispatchEvent(new Event("change"))}#C(){const e=this.#t.options;let t=Array.from(this.#t.selectedOptions);return t.length<1&&this.#h&&this.#p()&&t.push(e[0]),t.map(s=>s.value===""?this.#k(s.innerHTML):this.#h?this.#q(s):s.innerHTML).join("")}#A(){let e=[];return this.#t.querySelectorAll(":scope>*").forEach(t=>{if(t instanceof HTMLOptionElement&&t.value!==""&&e.push(this.#H(t)),t instanceof HTMLOptGroupElement){let s=document.createElement("div");s.classList.add(this.#L),s.innerHTML=`<span>${t.label}</span>`,t.querySelectorAll("option").forEach(r=>s.appendChild(this.#H(r))),e.push(s)}}),e}#k(e){return`<span class="bss-placeholder">${e}</span>`}#q(e){return`<div class="bss-tag"><svg data-bs-value="${e.value}" class="${this.#w}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></svg>
		${e.innerHTML}</div>`}#H(e){let t=document.createElement("button");return t.type="button",t.disabled=e.selected&&this.#h||e.disabled,t.innerHTML=e.innerHTML,t.classList.add(this.#n),e.selected&&t.classList.add("active"),t.addEventListener("click",()=>this.setValue(e.value)),t}#p(){return this.#t.options.length&&this.#t.options[0].value===""}}return a});
