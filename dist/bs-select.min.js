/*!
* @erwinstone/bs-select v1.0.0 (https://bs-select.vercel.app/)
* Copyright 2021 erwinstone
* Licensed under MIT (https://github.com/erwinstone/bs-select/blob/master/LICENSE)
*/(function(l,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r():typeof define=="function"&&define.amd?define(r):(l=typeof globalThis!="undefined"?globalThis:l||self,l.Bss=r())})(this,function(){"use strict";class l{constructor(t,e){this.classWrapper="bss-wrapper",this.classItem="dropdown-item",this.classItems="bss-items",this.classClear="bss-clear",this.classHeader="dropdown-header",this.classHidden="d-none",this.classNoResults="bss-no-results",this.classTagRemove="bss-tag-remove";var s,a,i;this.target=t,this.search=(s=e==null?void 0:e.search)!=null?s:t.dataset.bssSearch!==void 0,this.create=(a=e==null?void 0:e.create)!=null?a:t.dataset.bssCreate!==void 0,this.clear=(i=e==null?void 0:e.clear)!=null?i:t.dataset.bssClear!==void 0,this.maxHeight=(e==null?void 0:e.maxHeight)||t.dataset.bssMaxHeight||"25rem",this.createDropdown(),this.updateDropdown(),this.registerEvents()}createDropdown(){this.target.nextElementSibling&&this.target.nextElementSibling.classList&&this.target.nextElementSibling.classList.contains(this.classWrapper)&&this.target.nextElementSibling.remove();const t=`
		<div class="dropdown ${this.classWrapper}">
			<button type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
			<div class="dropdown-menu" style="max-height:${this.maxHeight}">
				<div class="d-flex flex-column">
					<div class="bss-search-wrapper">
						<input type="text" class="form-control" placeholder="Search" onkeydown="return event.key !== 'Enter'">
					</div>
					<div class="${this.classItems}"></div>
					<div class="${this.classNoResults} ${this.classItem} text-wrap ${this.classHidden}">No results found</div>
				</div>
			</div>
			<button class="btn ${this.classClear}" tabindex="-1" type="button" title="Clear selection">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
					<path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
					<path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
				</svg>
			</button>
		</div>
		`;this.target.insertAdjacentHTML("afterend",t),this.target.style.display="none";const e=this.target.nextElementSibling;e instanceof HTMLDivElement&&(this.dropdown=e),this.dropdownToggle=e.querySelector('[data-bs-toggle="dropdown"]'),this.searchInput=e.querySelector("input"),this.clearBtn=e.querySelector(`.${this.classClear}`),this.isMultiple=this.target.multiple,this.isDisabled=this.target.disabled,this.noResults=e.querySelector(`.${this.classNoResults}`),this.dropdownToggle.className=this.target.className,this.dropdownToggle.disabled=this.isDisabled,this.target.classList.contains("form-select-sm")&&this.searchInput.classList.add("form-control-sm"),this.target.classList.contains("form-select-lg")&&this.searchInput.classList.add("form-control-lg"),(!this.clear||this.isMultiple||!this.hasPlaceholder())&&this.clearBtn.remove(),this.search||(this.searchInput.parentElement.remove(),this.noResults.remove())}updateDropdown(){this.dropdownToggle.innerHTML=this.dropdownToggleInner();const t=this.dropdown.querySelector(`.${this.classItems}`);t.innerHTML="",this.itemsInner().forEach(e=>t.appendChild(e)),!this.isMultiple&&this.target.value!==""&&this.hasPlaceholder()?this.dropdownToggle.setAttribute("data-show-clear","true"):this.dropdownToggle.removeAttribute("data-show-clear"),this.isDisabled||this.dropdown.querySelectorAll(`.${this.classTagRemove}`).forEach(e=>{e.addEventListener("click",()=>{this.dropdownToggle.click(),this.removeValue(e.getAttribute("data-bs-value"))})}),this.searchInput.value="",this.search&&this.noResults.classList.add(this.classHidden)}registerEvents(){this.dropdownToggle.addEventListener("shown.bs.dropdown",()=>{const t=this.dropdown.querySelector(`.${this.classItem}.active`);t&&t instanceof HTMLButtonElement&&t.focus()}),this.searchInput.addEventListener("keyup",t=>{const e=this.searchInput.value.trim(),s=this.dropdown.querySelectorAll(`button.${this.classItem}`);let a=0;if(s.forEach(i=>{i.classList.add(this.classHidden),i.innerHTML.toLowerCase().indexOf(e.toLowerCase())>-1&&(i.classList.remove(this.classHidden),a++)}),this.dropdown.querySelectorAll(`.${this.classHeader}`).forEach(i=>{i.querySelectorAll(`button:not(.${this.classHidden})`).length?i.classList.remove(this.classHidden):i.classList.add(this.classHidden)}),a)this.noResults.classList.add(this.classHidden);else if(this.noResults.classList.remove(this.classHidden),this.create&&(this.noResults.innerHTML=`Press Enter to add "<b>${e}</b>"`,t.key==="Enter")){let i=document.createElement("option");i.value=e,i.selected=!0,i.textContent=e,this.target.add(i),this.dropdownToggle.click(),this.change()}}),this.clearBtn.addEventListener("click",()=>{Array.from(this.target.options).forEach(t=>t.selected=!1),this.hasPlaceholder()&&(this.target.value=""),this.change()}),this.target.addEventListener("change",()=>this.updateDropdown())}setValue(t){this.setSelectedOption(t,!0),t!==""&&this.setSelectedOption("",!1),this.change()}removeValue(t){this.setSelectedOption(t,!1),this.change()}getValue(){return this.isMultiple?Array.from(this.target.selectedOptions).map(t=>t.value):this.target.value}setSelectedOption(t,e){Array.from(this.target.options).forEach(s=>s.value===t&&(s.selected=e))}change(){this.target.dispatchEvent(new Event("change"))}dropdownToggleInner(){const t=this.target.options;let e=Array.from(this.target.selectedOptions);return e.length<1&&this.isMultiple&&this.hasPlaceholder()&&e.push(t[0]),e.map(s=>s.value===""?this.placeholder(s.innerHTML):this.isMultiple?this.tag(s):s.innerHTML).join("")}itemsInner(){let t=[];return this.target.querySelectorAll(":scope>*").forEach(e=>{if(e instanceof HTMLOptionElement&&e.value!==""&&t.push(this.item(e)),e instanceof HTMLOptGroupElement){let s=document.createElement("div");s.classList.add(this.classHeader),s.innerHTML=`<span>${e.label}</span>`,e.querySelectorAll("option").forEach(a=>s.appendChild(this.item(a))),t.push(s)}}),t}placeholder(t){return`<span class="bss-placeholder">${t}</span>`}tag(t){return`<div class="bss-tag"><svg data-bs-value="${t.value}" class="${this.classTagRemove}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></svg>
		${t.innerHTML}</div>`}item(t){let e=document.createElement("button");return e.type="button",e.disabled=t.selected&&this.isMultiple||t.disabled,e.innerHTML=t.innerHTML,e.classList.add(this.classItem),t.selected&&e.classList.add("active"),e.addEventListener("click",()=>this.setValue(t.value)),e}hasPlaceholder(){return this.target.options.length&&this.target.options[0].value===""}}return l});
