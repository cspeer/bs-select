/*!
* @erwinstone/bs-select v1.0.2 (https://bs-select.vercel.app/)
* Copyright 2022 erwinstone
* Licensed under MIT (https://github.com/erwinstone/bs-select/blob/master/LICENSE)
*/class l{#b="bss-wrapper";#n="dropdown-item";#f="bss-items";#L="bss-clear";#g="dropdown-header";#s="d-none";#w="bss-no-results";#E="bss-tag-remove";#t;#o;#y;#$;#x;#i;#S;#l;#e;#a;#d;#r;#h;#c;constructor(s,t){this.#t=s,this.#o=t?.search??s.dataset.bssSearch!==void 0,this.#y=t?.create??s.dataset.bssCreate!==void 0,this.#$=t?.clear??s.dataset.bssClear!==void 0,this.#x=t?.maxHeight||s.dataset.bssMaxHeight||"25rem",this.#i={search:"Search",noResults:"No results found",clear:"Clear selection",addElement:'Press Enter to add "<b>%{value}</b>"'},this.#i=t?.labels?{...this.#i,...t.labels}:this.#i,this.#S=(this.#t.dataset.bssAutoClose||t?.autoClose)??!0,this.#M(),this.#u(),this.#T()}#M(){this.#t.nextElementSibling&&this.#t.nextElementSibling.classList&&this.#t.nextElementSibling.classList.contains(this.#b)&&this.#t.nextElementSibling.remove();const s=`
		<div class="dropdown ${this.#b}">
			<button type="button" data-bs-toggle="dropdown" data-bs-auto-close="${this.#S}" aria-expanded="false"></button>
			<div class="dropdown-menu" style="max-height:${this.#x}">
				<div class="d-flex flex-column">
					<div class="bss-search-wrapper">
						<input type="text" class="form-control" placeholder="${this.#t.dataset.bssSearchLabel||this.#i.search}" onkeydown="return event.key !== 'Enter'">
					</div>
					<div class="${this.#f}"></div>
					<div class="${this.#w} ${this.#n} text-wrap ${this.#s}">${this.#t.dataset.bssNoResultsLabel||this.#i.noResults}</div>
				</div>
			</div>
			<button class="btn ${this.#L}" tabindex="-1" type="button" title="${this.#t.dataset.bssClearLabel||this.#i.clear}">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
					<path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
					<path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
				</svg>
			</button>
		</div>
		`;this.#t.insertAdjacentHTML("afterend",s),this.#t.style.display="none";const t=this.#t.nextElementSibling;t instanceof HTMLDivElement&&(this.#l=t),this.#e=t.querySelector('[data-bs-toggle="dropdown"]'),this.#a=t.querySelector("input"),this.#d=t.querySelector(`.${this.#L}`),this.#h=this.#t.multiple,this.#c=this.#t.disabled,this.#r=t.querySelector(`.${this.#w}`),this.#e.className=this.#t.className,this.#e.disabled=this.#c,this.#t.classList.contains("form-select-sm")&&this.#a.classList.add("form-control-sm"),this.#t.classList.contains("form-select-lg")&&this.#a.classList.add("form-control-lg"),this.#$||this.#d.remove(),this.#o||(this.#a.parentElement.remove(),this.#r.remove())}#u(){this.#e.innerHTML=this.#C();const s=this.#l.querySelector(`.${this.#f}`);s.innerHTML="",this.#A().forEach(t=>s.appendChild(t)),this.#t.value!==""&&this.#m()?this.#e.setAttribute("data-show-clear","true"):this.#e.removeAttribute("data-show-clear"),this.#c||this.#l.querySelectorAll(`.${this.#E}`).forEach(t=>{t.addEventListener("click",()=>{this.#e.click(),this.removeValue(t.getAttribute("data-bs-value"))})}),this.#a.value="",this.#o&&this.#r.classList.add(this.#s)}#T(){this.#e.addEventListener("shown.bs.dropdown",()=>{if(this.#o)this.#a.focus();else{const s=this.#l.querySelector(`.${this.#n}.active`);s&&s instanceof HTMLButtonElement&&s.focus()}}),this.#a.addEventListener("keyup",s=>{const t=this.#a.value.trim(),e=this.#l.querySelectorAll(`button.${this.#n}`);let a=0;if(e.forEach(i=>{i.classList.add(this.#s),i.innerHTML.toLowerCase().indexOf(t.toLowerCase())>-1&&(i.classList.remove(this.#s),a++)}),this.#l.querySelectorAll(`.${this.#g}`).forEach(i=>{i.querySelectorAll(`button:not(.${this.#s})`).length?i.classList.remove(this.#s):i.classList.add(this.#s)}),a)this.#r.classList.add(this.#s);else if(this.#r.classList.remove(this.#s),this.#y&&(this.#r.innerHTML=(this.#t.dataset.bssAddElement||this.#i.addElement).replace("%{value}",t),s.key==="Enter")){let i=document.createElement("option");i.value=t,i.selected=!0,i.textContent=t,this.#t.add(i),this.#e.click(),this.#p()}}),this.#d.addEventListener("click",()=>this.clear()),this.#t.addEventListener("change",()=>this.#u())}clear(){Array.from(this.#t.options).forEach(s=>s.selected=!1),this.#m()&&(this.#t.value=""),this.#u()}setValue(s){this.#v(s,!0),s!==""&&this.#v("",!1),this.#p()}removeValue(s){this.#v(s,!1),this.#p()}getValue(){return this.#h?Array.from(this.#t.selectedOptions).map(s=>s.value):this.#t.value}#v(s,t){Array.from(this.#t.options).forEach(e=>e.value===s&&(e.selected=t))}#p(){this.#t.dispatchEvent(new Event("change"))}#C(){const s=this.#t.options;let t=Array.from(this.#t.selectedOptions);return t.length<1&&this.#h&&this.#m()&&t.push(s[0]),t.map(e=>e.value===""?this.#k(e.innerHTML):this.#h?this.#q(e):e.innerHTML).join("")}#A(){let s=[];return this.#t.querySelectorAll(":scope>*").forEach(t=>{if(t instanceof HTMLOptionElement&&t.value!==""&&s.push(this.#H(t)),t instanceof HTMLOptGroupElement){let e=document.createElement("div");e.classList.add(this.#g),e.innerHTML=`<span>${t.label}</span>`,t.querySelectorAll("option").forEach(a=>e.appendChild(this.#H(a))),s.push(e)}}),s}#k(s){return`<span class="bss-placeholder">${s}</span>`}#q(s){return`<div class="bss-tag"><svg data-bs-value="${s.value}" class="${this.#E}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></svg>
		${s.innerHTML}</div>`}#H(s){let t=document.createElement("button");return t.type="button",t.disabled=s.selected&&this.#h||s.disabled,t.innerHTML=s.innerHTML,t.classList.add(this.#n),s.selected&&t.classList.add("active"),t.addEventListener("click",()=>this.setValue(s.value)),t}#m(){return this.#t.options.length&&this.#t.options[0].value===""}}export{l as default};
