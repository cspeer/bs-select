/*!
* @erwinstone/bs-select v1.0.2 (https://bs-select.vercel.app/)
* Copyright 2021 erwinstone
* Licensed under MIT (https://github.com/erwinstone/bs-select/blob/master/LICENSE)
*/class r{#p="bss-wrapper";#h="dropdown-item";#m="bss-items";#f="bss-clear";#b="dropdown-header";#s="d-none";#L="bss-no-results";#g="bss-tag-remove";#t;#n;#w;#E;#y;#r;#e;#i;#c;#l;#a;#u;constructor(t,s){this.#t=t,this.#n=s?.search??t.dataset.bssSearch!==void 0,this.#w=s?.create??t.dataset.bssCreate!==void 0,this.#E=s?.clear??t.dataset.bssClear!==void 0,this.#y=s?.maxHeight||t.dataset.bssMaxHeight||"25rem",this.#M(),this.#x(),this.#S()}#M(){this.#t.nextElementSibling&&this.#t.nextElementSibling.classList&&this.#t.nextElementSibling.classList.contains(this.#p)&&this.#t.nextElementSibling.remove();const t=`
		<div class="dropdown ${this.#p}">
			<button type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
			<div class="dropdown-menu" style="max-height:${this.#y}">
				<div class="d-flex flex-column">
					<div class="bss-search-wrapper">
						<input type="text" class="form-control" placeholder="Search" onkeydown="return event.key !== 'Enter'">
					</div>
					<div class="${this.#m}"></div>
					<div class="${this.#L} ${this.#h} text-wrap ${this.#s}">No results found</div>
				</div>
			</div>
			<button class="btn ${this.#f}" tabindex="-1" type="button" title="Clear selection">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
					<path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
					<path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
				</svg>
			</button>
		</div>
		`;this.#t.insertAdjacentHTML("afterend",t),this.#t.style.display="none";const s=this.#t.nextElementSibling;s instanceof HTMLDivElement&&(this.#r=s),this.#e=s.querySelector('[data-bs-toggle="dropdown"]'),this.#i=s.querySelector("input"),this.#c=s.querySelector(`.${this.#f}`),this.#a=this.#t.multiple,this.#u=this.#t.disabled,this.#l=s.querySelector(`.${this.#L}`),this.#e.className=this.#t.className,this.#e.disabled=this.#u,this.#t.classList.contains("form-select-sm")&&this.#i.classList.add("form-control-sm"),this.#t.classList.contains("form-select-lg")&&this.#i.classList.add("form-control-lg"),(!this.#E||this.#a||!this.#d())&&this.#c.remove(),this.#n||(this.#i.parentElement.remove(),this.#l.remove())}#x(){this.#e.innerHTML=this.#$();const t=this.#r.querySelector(`.${this.#m}`);t.innerHTML="",this.#T().forEach(s=>t.appendChild(s)),!this.#a&&this.#t.value!==""&&this.#d()?this.#e.setAttribute("data-show-clear","true"):this.#e.removeAttribute("data-show-clear"),this.#u||this.#r.querySelectorAll(`.${this.#g}`).forEach(s=>{s.addEventListener("click",()=>{this.#e.click(),this.removeValue(s.getAttribute("data-bs-value"))})}),this.#i.value="",this.#n&&this.#l.classList.add(this.#s)}#S(){this.#e.addEventListener("shown.bs.dropdown",()=>{if(this.#n)this.#i.focus();else{const t=this.#r.querySelector(`.${this.#h}.active`);t&&t instanceof HTMLButtonElement&&t.focus()}}),this.#i.addEventListener("keyup",t=>{const s=this.#i.value.trim(),e=this.#r.querySelectorAll(`button.${this.#h}`);let a=0;if(e.forEach(i=>{i.classList.add(this.#s),i.innerHTML.toLowerCase().indexOf(s.toLowerCase())>-1&&(i.classList.remove(this.#s),a++)}),this.#r.querySelectorAll(`.${this.#b}`).forEach(i=>{i.querySelectorAll(`button:not(.${this.#s})`).length?i.classList.remove(this.#s):i.classList.add(this.#s)}),a)this.#l.classList.add(this.#s);else if(this.#l.classList.remove(this.#s),this.#w&&(this.#l.innerHTML=`Press Enter to add "<b>${s}</b>"`,t.key==="Enter")){let i=document.createElement("option");i.value=s,i.selected=!0,i.textContent=s,this.#t.add(i),this.#e.click(),this.#o()}}),this.#c.addEventListener("click",()=>{Array.from(this.#t.options).forEach(t=>t.selected=!1),this.#d()&&(this.#t.value=""),this.#o()}),this.#t.addEventListener("change",()=>this.#x())}setValue(t){this.#v(t,!0),t!==""&&this.#v("",!1),this.#o()}removeValue(t){this.#v(t,!1),this.#o()}getValue(){return this.#a?Array.from(this.#t.selectedOptions).map(t=>t.value):this.#t.value}#v(t,s){Array.from(this.#t.options).forEach(e=>e.value===t&&(e.selected=s))}#o(){this.#t.dispatchEvent(new Event("change"))}#$(){const t=this.#t.options;let s=Array.from(this.#t.selectedOptions);return s.length<1&&this.#a&&this.#d()&&s.push(t[0]),s.map(e=>e.value===""?this.#A(e.innerHTML):this.#a?this.#k(e):e.innerHTML).join("")}#T(){let t=[];return this.#t.querySelectorAll(":scope>*").forEach(s=>{if(s instanceof HTMLOptionElement&&s.value!==""&&t.push(this.#H(s)),s instanceof HTMLOptGroupElement){let e=document.createElement("div");e.classList.add(this.#b),e.innerHTML=`<span>${s.label}</span>`,s.querySelectorAll("option").forEach(a=>e.appendChild(this.#H(a))),t.push(e)}}),t}#A(t){return`<span class="bss-placeholder">${t}</span>`}#k(t){return`<div class="bss-tag"><svg data-bs-value="${t.value}" class="${this.#g}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></svg>
		${t.innerHTML}</div>`}#H(t){let s=document.createElement("button");return s.type="button",s.disabled=t.selected&&this.#a||t.disabled,s.innerHTML=t.innerHTML,s.classList.add(this.#h),t.selected&&s.classList.add("active"),s.addEventListener("click",()=>this.setValue(t.value)),s}#d(){return this.#t.options.length&&this.#t.options[0].value===""}}export{r as default};
