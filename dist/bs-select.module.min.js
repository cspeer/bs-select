/*!
* @erwinstone/bs-select v1.0.2 (https://bs-select.vercel.app/)
* Copyright 2022 erwinstone
* Licensed under MIT (https://github.com/erwinstone/bs-select/blob/master/LICENSE)
*/class l{#b="bss-wrapper";#o="dropdown-item";#f="bss-items";#L="bss-clear";#g="dropdown-header";#s="d-none";#w="bss-no-results";#E="bss-tag-remove";#t;#d;#y;#$;#x;#a;#S;#l;#e;#i;#c;#r;#h;#n;constructor(e,t){this.#t=e,this.#d=t?.search??e.dataset.bssSearch!==void 0,this.#y=t?.create??e.dataset.bssCreate!==void 0,this.#$=t?.clear??e.dataset.bssClear!==void 0,this.#x=t?.maxHeight||e.dataset.bssMaxHeight||"25rem",this.#a={placeholder:"",search:"Search",noResults:"No results found",clear:"Clear selection",addElement:'Press Enter to add "<b>%{value}</b>"'},this.#S=(this.#t.dataset.bssAutoClose||t?.autoClose)??"true",this.#M(),this.#u(),this.#C()}#M(){this.#t.nextElementSibling&&this.#t.nextElementSibling.classList&&this.#t.nextElementSibling.classList.contains(this.#b)&&this.#t.nextElementSibling.remove();const e=`
		<div class="dropdown ${this.#b}">
			<button type="button" data-bs-toggle="dropdown" data-bs-auto-close="${this.#S}" aria-expanded="false"></button>
			<div class="dropdown-menu" style="max-height:${this.#x}">
				<div class="d-flex flex-column">
					<div class="bss-search-wrapper">
						<input type="text" class="form-control" placeholder="${this.#t.dataset.bssSearchLabel||this.#a.search}" onkeydown="return event.key !== 'Enter'">
					</div>
					<div class="${this.#f}"></div>
					<div class="${this.#w} ${this.#o} text-wrap ${this.#s}">${this.#t.dataset.bssNoResultsLabel||this.#a.noResults}</div>
				</div>
			</div>
			<button class="btn ${this.#L}" tabindex="-1" type="button" title="${this.#t.dataset.bssClearLabel||this.#a.clear}">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
					<path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
					<path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
				</svg>
			</button>
		</div>
		`;this.#t.insertAdjacentHTML("afterend",e),this.#t.style.display="none";const t=this.#t.nextElementSibling;t instanceof HTMLDivElement&&(this.#l=t),this.#e=t.querySelector('[data-bs-toggle="dropdown"]'),this.#i=t.querySelector("input"),this.#c=t.querySelector(`.${this.#L}`),this.#h=this.#t.multiple,this.#n=this.#t.disabled,this.#r=t.querySelector(`.${this.#w}`),this.#e.className=this.#t.className,this.#e.disabled=this.#n,this.#t.classList.contains("form-select-sm")&&this.#i.classList.add("form-control-sm"),this.#t.classList.contains("form-select-lg")&&this.#i.classList.add("form-control-lg"),this.#$||this.#c.remove(),this.#d||(this.#i.parentElement.remove(),this.#r.remove())}#u(){this.#e.innerHTML=this.#T();const e=this.#l.querySelector(`.${this.#f}`);e.innerHTML="",this.#A().forEach(t=>e.appendChild(t)),this.#t.value!==""&&this.#m()?this.#e.setAttribute("data-show-clear","true"):this.#e.removeAttribute("data-show-clear"),this.#n||this.#l.querySelectorAll(`.${this.#E}`).forEach(t=>{t.addEventListener("click",()=>{this.#e.click(),this.removeValue(t.getAttribute("data-bs-value"))})}),this.#i.value="",this.#d&&this.#r.classList.add(this.#s)}#C(){this.#e.addEventListener("shown.bs.dropdown",()=>{if(this.#d)this.#i.focus();else{const e=this.#l.querySelector(`.${this.#o}.active`);e&&e instanceof HTMLButtonElement&&e.focus()}}),this.#i.addEventListener("keyup",e=>{const t=this.#i.value.trim(),i=this.#l.querySelectorAll(`button.${this.#o}`);let a=0;if(i.forEach(s=>{s.classList.add(this.#s),s.innerHTML.toLowerCase().indexOf(t.toLowerCase())>-1&&(s.classList.remove(this.#s),a++)}),this.#l.querySelectorAll(`.${this.#g}`).forEach(s=>{s.querySelectorAll(`button:not(.${this.#s})`).length?s.classList.remove(this.#s):s.classList.add(this.#s)}),a)this.#r.classList.add(this.#s);else if(this.#r.classList.remove(this.#s),this.#y&&(this.#r.innerHTML=(this.#t.dataset.bssAddElement||this.#a.addElement).replace("%{value}",t),e.key==="Enter")){let s=document.createElement("option");s.value=t,s.selected=!0,s.textContent=t,this.#t.add(s),this.#e.click(),this.#v()}}),this.#c.addEventListener("click",()=>this.clear()),this.#t.addEventListener("change",()=>this.#u())}enable(){this.#n=!1,this.#e.disabled=!1}disable(){this.#n=!0,this.#e.disabled=!0}clear(){Array.from(this.#t.options).forEach(e=>e.selected=!1),this.#m()&&(this.#t.value=""),this.#u()}setValue(e){this.#p(e,!0),this.#p("",!1),this.#v()}removeValue(e){this.#p(e,!1),this.#v()}getValue(){return this.#h?Array.from(this.#t.selectedOptions).map(e=>e.value):this.#t.value}#p(e,t){Array.from(this.#t.options).forEach(i=>i.value===e&&(i.selected=t))}#v(){this.#t.dispatchEvent(new Event("change"))}#T(){this.#t.options;const e=Array.from(this.#t.selectedOptions);if(e.length<1&&this.#h&&this.#m()){const t=document.createElement("option");t.hidden=!0,t.textContent=this.#t.dataset.bssPlaceholder||this.#a.placeholder,e.push(t)}return e.map(t=>t.hidden?this.#k(t.innerHTML):this.#h?this.#q(t):t.innerHTML).join("")}#A(){const e=[];return this.#t.querySelectorAll(":scope>*").forEach(t=>{if(t instanceof HTMLOptionElement&&!t.hidden&&e.push(this.#H(t)),t instanceof HTMLOptGroupElement){const i=document.createElement("div");i.classList.add(this.#g),i.innerHTML=`<span>${t.label}</span>`,t.querySelectorAll("option").forEach(a=>i.appendChild(this.#H(a))),e.push(i)}}),e}#k(e){return`<span class="bss-placeholder">${e}</span>`}#q(e){return`<div class="bss-tag"><svg data-bs-value="${e.value}" class="${this.#E}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></svg>
		${e.innerHTML}</div>`}#H(e){let t=document.createElement("button");return t.type="button",t.disabled=e.selected&&this.#h||e.disabled,t.innerHTML=e.innerHTML,t.classList.add(this.#o),e.selected&&t.classList.add("active"),t.addEventListener("click",()=>this.setValue(e.value)),t}#m(){return(this.#t.dataset.bssPlaceholder||this.#a.placeholder)!==""}}export{l as default};
