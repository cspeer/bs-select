/*!
* @erwinstone/bs-select v1.0.0 (https://bs-select.vercel.app/)
* Copyright 2021 erwinstone
* Licensed under MIT (https://github.com/erwinstone/bs-select/blob/master/LICENSE)
*/class l{constructor(e,t){this.classWrapper="bss-wrapper",this.classItem="dropdown-item",this.classItems="bss-items",this.classClear="bss-clear",this.classHeader="dropdown-header",this.classHidden="d-none",this.classNoResults="bss-no-results",this.classTagRemove="bss-tag-remove";var s,i,a;this.target=e,this.search=(s=t==null?void 0:t.search)!=null?s:e.dataset.bssSearch!==void 0,this.create=(i=t==null?void 0:t.create)!=null?i:e.dataset.bssCreate!==void 0,this.clear=(a=t==null?void 0:t.clear)!=null?a:e.dataset.bssClear!==void 0,this.maxHeight=(t==null?void 0:t.maxHeight)||e.dataset.bssMaxHeight||"25rem",this.createDropdown(),this.updateDropdown(),this.registerEvents()}createDropdown(){this.target.nextElementSibling&&this.target.nextElementSibling.classList&&this.target.nextElementSibling.classList.contains(this.classWrapper)&&this.target.nextElementSibling.remove();const e=`
		<div class="dropdown ${this.classWrapper}">
			<button type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
			<div class="dropdown-menu" style="max-height:${this.maxHeight}">
				<div class="d-flex flex-column">
					<div class="bss-search-wrapper">
						<input type="text" class="form-control" placeholder="Search" onkeydown="return event.key !== 'Enter'">
					</div>
					<div class="${this.classItems}"></div>
					<div class="${this.classNoResults} ${this.classItem} text-wrap ${this.classHidden}">No results found</div>
				</div>
			</div>
			<button class="btn ${this.classClear}" tabindex="-1" type="button" title="Clear selection">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
					<path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
					<path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
				</svg>
			</button>
		</div>
		`;this.target.insertAdjacentHTML("afterend",e),this.target.style.display="none";const t=this.target.nextElementSibling;t instanceof HTMLDivElement&&(this.dropdown=t),this.dropdownToggle=t.querySelector('[data-bs-toggle="dropdown"]'),this.searchInput=t.querySelector("input"),this.clearBtn=t.querySelector(`.${this.classClear}`),this.isMultiple=this.target.multiple,this.isDisabled=this.target.disabled,this.noResults=t.querySelector(`.${this.classNoResults}`),this.dropdownToggle.className=this.target.className,this.dropdownToggle.disabled=this.isDisabled,this.target.classList.contains("form-select-sm")&&this.searchInput.classList.add("form-control-sm"),this.target.classList.contains("form-select-lg")&&this.searchInput.classList.add("form-control-lg"),(!this.clear||this.isMultiple||!this.hasPlaceholder())&&this.clearBtn.remove(),this.search||(this.searchInput.parentElement.remove(),this.noResults.remove())}updateDropdown(){this.dropdownToggle.innerHTML=this.dropdownToggleInner();const e=this.dropdown.querySelector(`.${this.classItems}`);e.innerHTML="",this.itemsInner().forEach(t=>e.appendChild(t)),!this.isMultiple&&this.target.value!==""&&this.hasPlaceholder()?this.dropdownToggle.setAttribute("data-show-clear","true"):this.dropdownToggle.removeAttribute("data-show-clear"),this.isDisabled||this.dropdown.querySelectorAll(`.${this.classTagRemove}`).forEach(t=>{t.addEventListener("click",()=>{this.dropdownToggle.click(),this.removeValue(t.getAttribute("data-bs-value"))})}),this.searchInput.value="",this.search&&this.noResults.classList.add(this.classHidden)}registerEvents(){this.dropdownToggle.addEventListener("shown.bs.dropdown",()=>{const e=this.dropdown.querySelector(`.${this.classItem}.active`);e&&e instanceof HTMLButtonElement&&e.focus()}),this.searchInput.addEventListener("keyup",e=>{const t=this.searchInput.value.trim(),s=this.dropdown.querySelectorAll(`button.${this.classItem}`);let i=0;if(s.forEach(a=>{a.classList.add(this.classHidden),a.innerHTML.toLowerCase().indexOf(t.toLowerCase())>-1&&(a.classList.remove(this.classHidden),i++)}),this.dropdown.querySelectorAll(`.${this.classHeader}`).forEach(a=>{a.querySelectorAll(`button:not(.${this.classHidden})`).length?a.classList.remove(this.classHidden):a.classList.add(this.classHidden)}),i)this.noResults.classList.add(this.classHidden);else if(this.noResults.classList.remove(this.classHidden),this.create&&(this.noResults.innerHTML=`Press Enter to add "<b>${t}</b>"`,e.key==="Enter")){let a=document.createElement("option");a.value=t,a.selected=!0,a.textContent=t,this.target.add(a),this.dropdownToggle.click(),this.change()}}),this.clearBtn.addEventListener("click",()=>{Array.from(this.target.options).forEach(e=>e.selected=!1),this.hasPlaceholder()&&(this.target.value=""),this.change()}),this.target.addEventListener("change",()=>this.updateDropdown())}setValue(e){this.setSelectedOption(e,!0),e!==""&&this.setSelectedOption("",!1),this.change()}removeValue(e){this.setSelectedOption(e,!1),this.change()}getValue(){return this.isMultiple?Array.from(this.target.selectedOptions).map(e=>e.value):this.target.value}setSelectedOption(e,t){Array.from(this.target.options).forEach(s=>s.value===e&&(s.selected=t))}change(){this.target.dispatchEvent(new Event("change"))}dropdownToggleInner(){const e=this.target.options;let t=Array.from(this.target.selectedOptions);return t.length<1&&this.isMultiple&&this.hasPlaceholder()&&t.push(e[0]),t.map(s=>s.value===""?this.placeholder(s.innerHTML):this.isMultiple?this.tag(s):s.innerHTML).join("")}itemsInner(){let e=[];return this.target.querySelectorAll(":scope>*").forEach(t=>{if(t instanceof HTMLOptionElement&&t.value!==""&&e.push(this.item(t)),t instanceof HTMLOptGroupElement){let s=document.createElement("div");s.classList.add(this.classHeader),s.innerHTML=`<span>${t.label}</span>`,t.querySelectorAll("option").forEach(i=>s.appendChild(this.item(i))),e.push(s)}}),e}placeholder(e){return`<span class="bss-placeholder">${e}</span>`}tag(e){return`<div class="bss-tag"><svg data-bs-value="${e.value}" class="${this.classTagRemove}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></svg>
		${e.innerHTML}</div>`}item(e){let t=document.createElement("button");return t.type="button",t.disabled=e.selected&&this.isMultiple||e.disabled,t.innerHTML=e.innerHTML,t.classList.add(this.classItem),e.selected&&t.classList.add("active"),t.addEventListener("click",()=>this.setValue(e.value)),t}hasPlaceholder(){return this.target.options.length&&this.target.options[0].value===""}}export{l as default};
